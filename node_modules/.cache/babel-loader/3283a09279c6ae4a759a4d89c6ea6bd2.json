{"ast":null,"code":"var _jsxFileName = \"/home/caionnc/Documents/CC_UFPB/TCC/github-tcc/tcc/src/components/Player/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { IonPopover, isPlatform } from '@ionic/react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory, useLocation } from 'react-router';\nimport Unity from 'react-unity-webgl';\nimport { IconDictionary, IconHistory, IconEdit, IconPauseOutlined, IconRunning, IconPause, IconShare, IconThumbs, IconClose, logoRefresh, logoSubtitleOn, logoSubtitleOff, IcaroAvatar, HozanaAvatar, GugaAvatar } from 'assets';\nimport EvaluationModal from 'components/EvaluationModal';\nimport TutorialPopover from 'components/TutorialPopover';\nimport paths from 'constants/paths';\nimport { PlayerKeys } from 'constants/player';\nimport { useTranslation } from 'hooks/Translation';\nimport PlayerService from 'services/unity';\nimport { Creators } from 'store/ducks/customization';\nimport { Creators as CreatorsVideo } from 'store/ducks/video';\nimport './styles.css';\nimport { TutorialSteps, useTutorial } from 'hooks/Tutorial';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst playerService = PlayerService.getService();\nconst buttonColors = {\n  VARIANT_BLUE: '#FFF',\n  VARAINT_WHITE: '#939293',\n  VARIANT_WHITE_ACTIVE: '#003F86'\n};\nconst X1 = 1;\nconst X2 = 2;\nconst X3 = 3;\nconst UNDEFINED_GLOSS = -1;\nconst MAX_PROGRESS = 100;\n\nfunction toBoolean(flag) {\n  return flag === 'True';\n}\n\nfunction toInteger(flag) {\n  return flag ? 1 : 0;\n}\n\nfunction Player() {\n  _s();\n\n  const [popoverState, setShowPopover] = useState({\n    showPopover: false,\n    event: undefined\n  });\n  const history = useHistory();\n  const {\n    currentStep,\n    goNextStep,\n    onCancel\n  } = useTutorial();\n  const {\n    generateVideo,\n    textGloss\n  } = useTranslation();\n  const currentBody = useSelector(({\n    customization\n  }) => customization.currentbody);\n  const currentEye = useSelector(({\n    customization\n  }) => customization.currenteye);\n  const currentHair = useSelector(({\n    customization\n  }) => customization.currenthair);\n  const currentShirt = useSelector(({\n    customization\n  }) => customization.currentshirt);\n  const currentPants = useSelector(({\n    customization\n  }) => customization.currentpants); // Dynamic states [MA]\n\n  const [currentAvatar, setCurrentAvatar] = useState('icaro');\n  const [visiblePlayer, setVisiblePlayer] = useState(false);\n  const [speedValue, setSpeedValue] = useState(X1);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isPaused, setIsPaused] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [hasFinished, setHasFinished] = useState(false);\n  const [isShowSubtitle, setIsShowSubtitle] = useState(true); // Reference to handle the progress bar [MA]\n\n  const progressBarRef = useRef(null);\n  const progressContainerRef = useRef(null);\n  const location = useLocation();\n  const dispatch = useDispatch();\n  let glossLen = UNDEFINED_GLOSS;\n  let cache = UNDEFINED_GLOSS; // To avoid the unity splash screen [MA]\n\n  useEffect(() => {\n    playerService.getUnity().on('progress', progression => {\n      if (progression === 1) {\n        dispatch(Creators.loadCustomization.request({}));\n        setVisiblePlayer(true);\n      }\n    });\n  }, [dispatch]);\n\n  function handlePlay(gloss) {\n    if (progressContainerRef.current) {\n      progressContainerRef.current.style.visibility = 'visible';\n    }\n\n    playerService.send(PlayerKeys.PLAYER_MANAGER, PlayerKeys.PLAY_NOW, gloss);\n  } // Evaluation modal\n\n\n  const [showModal, setShowModal] = useState(false);\n  const [showYesModal, setShowYesModal] = useState(false);\n  const [showNoModal, setShowNoModal] = useState(false);\n  const [showSuggestionModal, setShowSuggestionModal] = useState(false);\n  const [showSuggestionFeedbackModal, setShowSuggestionFeedbackModal] = useState(false);\n\n  window.onPlayingStateChange = (_isPlaying, _isPaused, _isPlayingIntervalAnimation, _isLoading, _isRepeatable) => {\n    setIsPlaying(toBoolean(_isPlaying));\n    setIsPaused(toBoolean(_isPaused));\n    setLoading(toBoolean(_isLoading));\n\n    if (!toBoolean(_isPlaying)) {\n      setHasFinished(true);\n    }\n  };\n\n  useEffect(() => {\n    if (location.pathname === paths.HOME) resetTranslation();\n  }, [location]);\n\n  window.CounterGloss = (counter, glossLength) => {\n    if (counter === cache - 1) {\n      glossLen = counter;\n    }\n\n    cache = counter;\n    const progress = 1 / glossLen * 100;\n\n    if (progressBarRef.current && progressContainerRef.current) {\n      progressContainerRef.current.style.visibility = 'visible';\n      progressBarRef.current.style.visibility = 'visible';\n      progressBarRef.current.style.width = `${progress > MAX_PROGRESS ? MAX_PROGRESS : progress}%`;\n    }\n\n    dispatch(CreatorsVideo.setProgress(progress));\n  };\n\n  function handlePause() {\n    playerService.send(PlayerKeys.PLAYER_MANAGER, PlayerKeys.SET_PAUSE_STATE, toInteger(!isPaused));\n  }\n\n  function handleSpeed(speed) {\n    setSpeedValue(speed);\n    playerService.send(PlayerKeys.PLAYER_MANAGER, PlayerKeys.SET_SLIDER, speed);\n    setShowPopover({\n      showPopover: false,\n      event: undefined\n    });\n  }\n\n  function handleChangeAvatar() {\n    let nextAvatar;\n\n    if (currentAvatar === 'icaro') {\n      nextAvatar = 'hozana';\n    } else if (currentAvatar === 'hozana') {\n      nextAvatar = 'guga';\n    } else {\n      nextAvatar = 'icaro';\n    }\n\n    setCurrentAvatar(nextAvatar);\n    playerService.send(PlayerKeys.PLAYER_MANAGER, PlayerKeys.CHANGE_AVATAR, nextAvatar);\n  }\n\n  function handleSubtitle() {\n    playerService.send(PlayerKeys.PLAYER_MANAGER, PlayerKeys.SET_SUBTITLE_STATE, toInteger(!isShowSubtitle));\n    setIsShowSubtitle(!isShowSubtitle);\n  }\n\n  function handleShare() {\n    generateVideo();\n  }\n\n  function resetTranslation() {\n    setHasFinished(false);\n\n    if (progressBarRef.current && progressContainerRef.current) {\n      progressContainerRef.current.style.visibility = 'hidden';\n      progressBarRef.current.style.visibility = 'hidden';\n      progressBarRef.current.style.width = '0%';\n    }\n  }\n\n  const renderPlayerButtons = () => {\n    if (isPlaying) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"player-action-button-transparent\",\n          type: \"button\",\n          onClick: e => {\n            e.persist();\n            setShowPopover({\n              showPopover: true,\n              event: e\n            });\n          },\n          children: /*#__PURE__*/_jsxDEV(IconRunning, {\n            color: buttonColors.VARAINT_WHITE\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"player-action-button player-action-button-insert\",\n          type: \"button\",\n          onClick: handlePause,\n          children: isPaused ? /*#__PURE__*/_jsxDEV(IconPauseOutlined, {\n            color: buttonColors.VARIANT_BLUE,\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(IconPause, {\n            color: buttonColors.VARIANT_BLUE,\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"player-action-button-transparent\",\n          type: \"button\",\n          onClick: handleSubtitle,\n          children: isShowSubtitle ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: logoSubtitleOn,\n            alt: \"refresh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            src: logoSubtitleOff,\n            alt: \"refresh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true);\n    }\n\n    if (hasFinished) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"player-action-button-transparent\",\n          type: \"button\",\n          onClick: e => {\n            e.persist();\n            setShowPopover({\n              showPopover: true,\n              event: e\n            });\n          },\n          children: /*#__PURE__*/_jsxDEV(IconRunning, {\n            color: buttonColors.VARAINT_WHITE\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"player-action-button player-action-button-insert\",\n          type: \"button\",\n          onClick: () => handlePlay(textGloss),\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: logoRefresh,\n            alt: \"refresh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"player-action-button-transparent\",\n          type: \"button\",\n          onClick: handleSubtitle,\n          children: isShowSubtitle ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: logoSubtitleOn,\n            alt: \"refresh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            src: logoSubtitleOff,\n            alt: \"refresh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true);\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginRight: 6,\n            position: 'absolute',\n            width: '100vw',\n            bottom: 50,\n            left: 0\n          },\n          children: /*#__PURE__*/_jsxDEV(TutorialPopover, {\n            title: \"Dicion\\xE1rio\",\n            description: \"Consulte os sinais dispon\\xEDveis no vlibras\",\n            position: \"bl\",\n            isEnabled: currentStep === TutorialSteps.DICTIONARY\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"player-action-button-transparent\",\n          type: \"button\",\n          onClick: () => {\n            history.push(paths.DICTIONARY_PLAYER); //   setVisiblePlayer(false);\n          },\n          children: /*#__PURE__*/_jsxDEV(IconDictionary, {\n            color: buttonColors.VARAINT_WHITE\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: 'auto',\n            position: 'absolute',\n            bottom: 70,\n            left: 0,\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'center',\n            alignItems: 'center',\n            width: '100vw'\n          },\n          children: /*#__PURE__*/_jsxDEV(TutorialPopover, {\n            title: \"Tradu\\xE7\\xE3o PT-BR\",\n            description: \"Escreva ou cole o texto para ser traduzido\",\n            position: \"bc\",\n            isEnabled: currentStep === TutorialSteps.TRANSLATION\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"player-action-button player-action-button-insert\",\n        type: \"button\",\n        onClick: () => history.push(paths.TRANSLATOR),\n        children: /*#__PURE__*/_jsxDEV(IconEdit, {\n          color: buttonColors.VARIANT_BLUE,\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: 'auto',\n          position: 'absolute',\n          bottom: 60,\n          left: 0,\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'center',\n          alignItems: 'center',\n          width: '100vw',\n          paddingRight: '28px'\n        },\n        children: /*#__PURE__*/_jsxDEV(TutorialPopover, {\n          title: \"Hist\\xF3rico\",\n          description: \"Acesse as tradu\\xE7\\xF5es dos \\xFAltimos 30 dias\",\n          position: \"br\",\n          isEnabled: currentStep === TutorialSteps.HISTORY\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"player-action-button-transparent\",\n        type: \"button\",\n        onClick: () => history.push(paths.HISTORY),\n        children: /*#__PURE__*/_jsxDEV(IconHistory, {\n          color: buttonColors.VARAINT_WHITE,\n          size: 32\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  };\n\n  useEffect(() => {\n    const preProcessingPreview = JSON.stringify({\n      corpo: currentBody,\n      olhos: '#fffafa',\n      cabelo: currentHair,\n      camisa: currentShirt,\n      calca: currentPants,\n      iris: currentEye,\n      pos: 'center'\n    });\n    console.log(preProcessingPreview);\n    playerService.send(PlayerKeys.AVATAR, PlayerKeys.SETEDITOR, preProcessingPreview);\n  }, [currentBody, currentHair, currentShirt, currentPants, currentEye]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"player-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        padding: '8px',\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'flex-start',\n        zIndex: 2\n      },\n      children: /*#__PURE__*/_jsxDEV(TutorialPopover, {\n        title: \"Menu\",\n        description: \"Informa\\xE7\\xF5es e ajustes adicionais do tradudor\",\n        position: \"tl\",\n        isEnabled: currentStep === TutorialSteps.MENU\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IonPopover, {\n      cssClass: \"player-popover\",\n      event: popoverState.event,\n      isOpen: popoverState.showPopover,\n      onDidDismiss: () => setShowPopover({\n        showPopover: false,\n        event: undefined\n      }),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-popover-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: speedValue === X3 ? 'player-popover-content-item-active' : 'player-popover-content-item-none',\n          type: \"button\",\n          onClick: () => handleSpeed(X3),\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"X3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"player-popover-content-divider\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: speedValue === X2 ? 'player-popover-content-item-active' : 'player-popover-content-item-none',\n          type: \"button\",\n          onClick: () => handleSpeed(X2),\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"X2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"player-popover-content-divider\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: speedValue === X1 ? 'player-popover-content-item-active' : 'player-popover-content-item-none',\n          type: \"button\",\n          onClick: () => handleSpeed(X1),\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"X1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-container-button\",\n      children: isPlaying || hasFinished ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"player-button-rounded-top\",\n        type: \"button\",\n        onClick: resetTranslation,\n        children: /*#__PURE__*/_jsxDEV(IconClose, {\n          color: \"#FFF\",\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginRight: 6\n          },\n          children: /*#__PURE__*/_jsxDEV(TutorialPopover, {\n            title: \"Trocar avatar\",\n            description: \"Alterne entre os avatares dispon\\xEDveis\",\n            position: \"rb\",\n            isEnabled: currentStep === TutorialSteps.CHANGE_AVATAR\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"player-button-avatar-rounded-top\",\n          type: \"button\",\n          onClick: handleChangeAvatar,\n          children: [currentAvatar === 'icaro' && /*#__PURE__*/_jsxDEV(HozanaAvatar, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 45\n          }, this), currentAvatar === 'hozana' && /*#__PURE__*/_jsxDEV(GugaAvatar, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 46\n          }, this), currentAvatar === 'guga' && /*#__PURE__*/_jsxDEV(IcaroAvatar, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 44\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100vw',\n        zIndex: 0,\n        flexShrink: 0,\n        marginBottom: 70,\n        flex: 1,\n        display: 'flex',\n        background: isPlatform('ios') && visiblePlayer ? 'black' : '#E5E5E5'\n      },\n      children: /*#__PURE__*/_jsxDEV(Unity, {\n        unityContent: playerService.getUnity(),\n        className: \"player-content\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 7\n    }, this), (currentStep === TutorialSteps.LIKED_TRANSLATION || currentStep === TutorialSteps.SHARE || hasFinished && !isPlaying) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-container-buttons\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          top: -54,\n          position: 'absolute',\n          right: 10\n        },\n        children: /*#__PURE__*/_jsxDEV(TutorialPopover, {\n          title: \"Gostou da tradu\\xE7\\xE3o?\",\n          description: \"Avalie e sugira melhorias.\",\n          position: \"br\",\n          isEnabled: currentStep === TutorialSteps.LIKED_TRANSLATION\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 541,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"player-button-rounded\",\n        type: \"button\",\n        onClick: () => setShowModal(true),\n        children: /*#__PURE__*/_jsxDEV(IconThumbs, {\n          color: \"#FFF\",\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          top: -2,\n          position: 'absolute',\n          right: 10\n        },\n        children: /*#__PURE__*/_jsxDEV(TutorialPopover, {\n          title: \"Compartilhar\",\n          description: \"V\\xEDdeo com a tradu\\xE7\\xE3o\",\n          position: \"br\",\n          isEnabled: currentStep === TutorialSteps.SHARE\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"player-button-rounded\",\n        type: \"button\",\n        onClick: handleShare,\n        children: /*#__PURE__*/_jsxDEV(IconShare, {\n          color: \"#FFF\",\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-action-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        ref: progressContainerRef,\n        className: \"player-progress-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: progressBarRef,\n          className: \"player-progress-bar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"play-action-content\",\n        children: renderPlayerButtons()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EvaluationModal, {\n      show: showModal,\n      setShow: setShowModal,\n      showYes: showYesModal,\n      setShowYes: setShowYesModal,\n      showNo: showNoModal,\n      setShowNo: setShowNoModal,\n      showSuggestionModal: showSuggestionModal,\n      setShowSuggestionModal: setShowSuggestionModal,\n      showSuggestionFeedbackModal: showSuggestionFeedbackModal,\n      setSuggestionFeedbackModal: setShowSuggestionFeedbackModal,\n      isPlaying: isPlaying\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 593,\n      columnNumber: 7\n    }, this), TutorialSteps.INITIAL === currentStep && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tutorial-box-shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Veja como usar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 608,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row',\n          width: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button-outlined\",\n          onClick: onCancel,\n          children: \"Ver depois\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 610,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button-solid\",\n          onClick: goNextStep,\n          children: \"Inicar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 607,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 424,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Player, \"Nabib3DbXdhPg9d3MHWr1mXfdtk=\", false, function () {\n  return [useHistory, useTutorial, useTranslation, useSelector, useSelector, useSelector, useSelector, useSelector, useLocation, useDispatch];\n});\n\n_c = Player;\nexport default Player;\n\nvar _c;\n\n$RefreshReg$(_c, \"Player\");","map":{"version":3,"sources":["/home/caionnc/Documents/CC_UFPB/TCC/github-tcc/tcc/src/components/Player/index.tsx"],"names":["React","useEffect","useRef","useState","IonPopover","isPlatform","useDispatch","useSelector","useHistory","useLocation","Unity","IconDictionary","IconHistory","IconEdit","IconPauseOutlined","IconRunning","IconPause","IconShare","IconThumbs","IconClose","logoRefresh","logoSubtitleOn","logoSubtitleOff","IcaroAvatar","HozanaAvatar","GugaAvatar","EvaluationModal","TutorialPopover","paths","PlayerKeys","useTranslation","PlayerService","Creators","CreatorsVideo","TutorialSteps","useTutorial","playerService","getService","buttonColors","VARIANT_BLUE","VARAINT_WHITE","VARIANT_WHITE_ACTIVE","X1","X2","X3","UNDEFINED_GLOSS","MAX_PROGRESS","toBoolean","flag","toInteger","Player","popoverState","setShowPopover","showPopover","event","undefined","history","currentStep","goNextStep","onCancel","generateVideo","textGloss","currentBody","customization","currentbody","currentEye","currenteye","currentHair","currenthair","currentShirt","currentshirt","currentPants","currentpants","currentAvatar","setCurrentAvatar","visiblePlayer","setVisiblePlayer","speedValue","setSpeedValue","isPlaying","setIsPlaying","isPaused","setIsPaused","loading","setLoading","hasFinished","setHasFinished","isShowSubtitle","setIsShowSubtitle","progressBarRef","progressContainerRef","location","dispatch","glossLen","cache","getUnity","on","progression","loadCustomization","request","handlePlay","gloss","current","style","visibility","send","PLAYER_MANAGER","PLAY_NOW","showModal","setShowModal","showYesModal","setShowYesModal","showNoModal","setShowNoModal","showSuggestionModal","setShowSuggestionModal","showSuggestionFeedbackModal","setShowSuggestionFeedbackModal","window","onPlayingStateChange","_isPlaying","_isPaused","_isPlayingIntervalAnimation","_isLoading","_isRepeatable","pathname","HOME","resetTranslation","CounterGloss","counter","glossLength","progress","width","setProgress","handlePause","SET_PAUSE_STATE","handleSpeed","speed","SET_SLIDER","handleChangeAvatar","nextAvatar","CHANGE_AVATAR","handleSubtitle","SET_SUBTITLE_STATE","handleShare","renderPlayerButtons","e","persist","position","marginRight","bottom","left","DICTIONARY","push","DICTIONARY_PLAYER","margin","display","flexDirection","justifyContent","alignItems","TRANSLATION","TRANSLATOR","paddingRight","HISTORY","preProcessingPreview","JSON","stringify","corpo","olhos","cabelo","camisa","calca","iris","pos","console","log","AVATAR","SETEDITOR","padding","zIndex","MENU","flexShrink","marginBottom","flex","background","LIKED_TRANSLATION","SHARE","top","right","INITIAL"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nimport { IonPopover, isPlatform } from '@ionic/react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory, useLocation } from 'react-router';\nimport Unity from 'react-unity-webgl';\n\nimport {\n  IconDictionary,\n  IconHistory,\n  IconEdit,\n  IconPauseOutlined,\n  IconRunning,\n  IconPause,\n  IconShare,\n  IconThumbs,\n  IconClose,\n  IconIcaro,\n  logoRefresh,\n  IconHozana,\n  logoSubtitleOn,\n  logoSubtitleOff,\n  IcaroAvatar,\n  HozanaAvatar,\n  GugaAvatar,\n} from 'assets';\nimport EvaluationModal from 'components/EvaluationModal';\nimport TutorialPopover from 'components/TutorialPopover';\nimport paths from 'constants/paths';\nimport { PlayerKeys } from 'constants/player';\nimport { useTranslation } from 'hooks/Translation';\nimport PlayerService from 'services/unity';\nimport { RootState } from 'store';\nimport { Creators } from 'store/ducks/customization';\nimport { Creators as CreatorsVideo } from 'store/ducks/video';\n\nimport './styles.css';\nimport { TutorialSteps, useTutorial } from 'hooks/Tutorial';\n\ntype BooleanParamsPlayer = 'True' | 'False';\n\ntype Avatar = 'hozana' | 'icaro' | 'guga';\n\nconst playerService = PlayerService.getService();\n\nconst buttonColors = {\n  VARIANT_BLUE: '#FFF',\n  VARAINT_WHITE: '#939293',\n  VARIANT_WHITE_ACTIVE: '#003F86',\n};\n\nconst X1 = 1;\nconst X2 = 2;\nconst X3 = 3;\nconst UNDEFINED_GLOSS = -1;\nconst MAX_PROGRESS = 100;\n\nfunction toBoolean(flag: BooleanParamsPlayer): boolean {\n  return flag === 'True';\n}\n\nfunction toInteger(flag: boolean): number {\n  return flag ? 1 : 0;\n}\n\nfunction Player() {\n  const [popoverState, setShowPopover] = useState({\n    showPopover: false,\n    event: undefined,\n  });\n  const history = useHistory();\n  const { currentStep, goNextStep, onCancel } = useTutorial();\n\n  const { generateVideo, textGloss } = useTranslation();\n\n  const currentBody = useSelector(\n    ({ customization }: RootState) => customization.currentbody,\n  );\n  const currentEye = useSelector(\n    ({ customization }: RootState) => customization.currenteye,\n  );\n\n  const currentHair = useSelector(\n    ({ customization }: RootState) => customization.currenthair,\n  );\n\n  const currentShirt = useSelector(\n    ({ customization }: RootState) => customization.currentshirt,\n  );\n\n  const currentPants = useSelector(\n    ({ customization }: RootState) => customization.currentpants,\n  );\n\n  // Dynamic states [MA]\n  const [currentAvatar, setCurrentAvatar] = useState<Avatar>('icaro');\n  const [visiblePlayer, setVisiblePlayer] = useState(false);\n  const [speedValue, setSpeedValue] = useState(X1);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isPaused, setIsPaused] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [hasFinished, setHasFinished] = useState(false);\n  const [isShowSubtitle, setIsShowSubtitle] = useState(true);\n\n  // Reference to handle the progress bar [MA]\n  const progressBarRef = useRef<HTMLDivElement>(null);\n  const progressContainerRef = useRef<HTMLDivElement>(null);\n\n  const location = useLocation();\n  const dispatch = useDispatch();\n\n  let glossLen = UNDEFINED_GLOSS;\n  let cache = UNDEFINED_GLOSS;\n\n  // To avoid the unity splash screen [MA]\n  useEffect(() => {\n    playerService.getUnity().on('progress', (progression: number) => {\n      if (progression === 1) {\n        dispatch(Creators.loadCustomization.request({}));\n        setVisiblePlayer(true);\n      }\n    });\n  }, [dispatch]);\n\n  function handlePlay(gloss: string) {\n    if (progressContainerRef.current) {\n      progressContainerRef.current.style.visibility = 'visible';\n    }\n    playerService.send(PlayerKeys.PLAYER_MANAGER, PlayerKeys.PLAY_NOW, gloss);\n  }\n\n  // Evaluation modal\n  const [showModal, setShowModal] = useState(false);\n  const [showYesModal, setShowYesModal] = useState(false);\n  const [showNoModal, setShowNoModal] = useState(false);\n  const [showSuggestionModal, setShowSuggestionModal] = useState(false);\n  const [showSuggestionFeedbackModal, setShowSuggestionFeedbackModal] =\n    useState(false);\n\n  window.onPlayingStateChange = (\n    _isPlaying: BooleanParamsPlayer,\n    _isPaused: BooleanParamsPlayer,\n    _isPlayingIntervalAnimation: BooleanParamsPlayer,\n    _isLoading: BooleanParamsPlayer,\n    _isRepeatable: BooleanParamsPlayer,\n  ) => {\n    setIsPlaying(toBoolean(_isPlaying));\n    setIsPaused(toBoolean(_isPaused));\n    setLoading(toBoolean(_isLoading));\n\n    if (!toBoolean(_isPlaying)) {\n      setHasFinished(true);\n    }\n  };\n\n  useEffect(() => {\n    if (location.pathname === paths.HOME) resetTranslation();\n  }, [location]);\n\n  window.CounterGloss = (counter: number, glossLength: number) => {\n    if (counter === cache - 1) {\n      glossLen = counter;\n    }\n    cache = counter;\n\n    const progress = (1 / glossLen) * 100;\n\n    if (progressBarRef.current && progressContainerRef.current) {\n      progressContainerRef.current.style.visibility = 'visible';\n      progressBarRef.current.style.visibility = 'visible';\n      progressBarRef.current.style.width = `${\n        progress > MAX_PROGRESS ? MAX_PROGRESS : progress\n      }%`;\n    }\n    dispatch(CreatorsVideo.setProgress(progress));\n  };\n\n  function handlePause() {\n    playerService.send(\n      PlayerKeys.PLAYER_MANAGER,\n      PlayerKeys.SET_PAUSE_STATE,\n      toInteger(!isPaused),\n    );\n  }\n\n  function handleSpeed(speed: number) {\n    setSpeedValue(speed);\n    playerService.send(PlayerKeys.PLAYER_MANAGER, PlayerKeys.SET_SLIDER, speed);\n    setShowPopover({ showPopover: false, event: undefined });\n  }\n\n  function handleChangeAvatar() {\n    let nextAvatar: Avatar;\n\n    if (currentAvatar === 'icaro') {\n      nextAvatar = 'hozana';\n    } else if (currentAvatar === 'hozana') {\n      nextAvatar = 'guga';\n    } else {\n      nextAvatar = 'icaro';\n    }\n\n    setCurrentAvatar(nextAvatar);\n\n    playerService.send(\n      PlayerKeys.PLAYER_MANAGER,\n      PlayerKeys.CHANGE_AVATAR,\n      nextAvatar,\n    );\n  }\n\n  function handleSubtitle() {\n    playerService.send(\n      PlayerKeys.PLAYER_MANAGER,\n      PlayerKeys.SET_SUBTITLE_STATE,\n      toInteger(!isShowSubtitle),\n    );\n    setIsShowSubtitle(!isShowSubtitle);\n  }\n\n  function handleShare() {\n    generateVideo();\n  }\n\n  function resetTranslation() {\n    setHasFinished(false);\n\n    if (progressBarRef.current && progressContainerRef.current) {\n      progressContainerRef.current.style.visibility = 'hidden';\n      progressBarRef.current.style.visibility = 'hidden';\n      progressBarRef.current.style.width = '0%';\n    }\n  }\n\n  const renderPlayerButtons = () => {\n    if (isPlaying) {\n      return (\n        <>\n          <button\n            className=\"player-action-button-transparent\"\n            type=\"button\"\n            onClick={(e: any) => {\n              e.persist();\n              setShowPopover({ showPopover: true, event: e });\n            }}\n          >\n            <IconRunning color={buttonColors.VARAINT_WHITE} />\n          </button>\n          <button\n            className=\"player-action-button player-action-button-insert\"\n            type=\"button\"\n            onClick={handlePause}\n          >\n            {isPaused ? (\n              <IconPauseOutlined color={buttonColors.VARIANT_BLUE} size={24} />\n            ) : (\n              <IconPause color={buttonColors.VARIANT_BLUE} size={24} />\n            )}\n          </button>\n          <button\n            className=\"player-action-button-transparent\"\n            type=\"button\"\n            onClick={handleSubtitle}\n          >\n            {isShowSubtitle ? (\n              <img src={logoSubtitleOn} alt=\"refresh\" />\n            ) : (\n              <img src={logoSubtitleOff} alt=\"refresh\" />\n            )}\n          </button>\n        </>\n      );\n    }\n    if (hasFinished) {\n      return (\n        <>\n          <button\n            className=\"player-action-button-transparent\"\n            type=\"button\"\n            onClick={(e: any) => {\n              e.persist();\n              setShowPopover({ showPopover: true, event: e });\n            }}\n          >\n            <IconRunning color={buttonColors.VARAINT_WHITE} />\n          </button>\n          <button\n            className=\"player-action-button player-action-button-insert\"\n            type=\"button\"\n            onClick={() => handlePlay(textGloss)}\n          >\n            <img src={logoRefresh} alt=\"refresh\" />\n          </button>\n          <button\n            className=\"player-action-button-transparent\"\n            type=\"button\"\n            onClick={handleSubtitle}\n          >\n            {isShowSubtitle ? (\n              <img src={logoSubtitleOn} alt=\"refresh\" />\n            ) : (\n              <img src={logoSubtitleOff} alt=\"refresh\" />\n            )}\n          </button>\n        </>\n      );\n    }\n    return (\n      <>\n        <div\n          style={{\n            position: 'relative',\n          }}\n        >\n          <div\n            style={{\n              marginRight: 6,\n              position: 'absolute',\n              width: '100vw',\n              bottom: 50,\n              left: 0,\n            }}\n          >\n            <TutorialPopover\n              title=\"Dicionrio\"\n              description=\"Consulte os sinais disponveis no vlibras\"\n              position=\"bl\"\n              isEnabled={currentStep === TutorialSteps.DICTIONARY}\n            />\n          </div>\n          <button\n            className=\"player-action-button-transparent\"\n            type=\"button\"\n            onClick={() => {\n              history.push(paths.DICTIONARY_PLAYER);\n              //   setVisiblePlayer(false);\n            }}\n          >\n            <IconDictionary color={buttonColors.VARAINT_WHITE} />\n          </button>\n        </div>\n\n        <div>\n          <div\n            style={{\n              margin: 'auto',\n              position: 'absolute',\n              bottom: 70,\n              left: 0,\n              display: 'flex',\n              flexDirection: 'row',\n              justifyContent: 'center',\n              alignItems: 'center',\n              width: '100vw',\n            }}\n          >\n            <TutorialPopover\n              title=\"Traduo PT-BR\"\n              description=\"Escreva ou cole o texto para ser traduzido\"\n              position=\"bc\"\n              isEnabled={currentStep === TutorialSteps.TRANSLATION}\n            />\n          </div>\n        </div>\n        <button\n          className=\"player-action-button player-action-button-insert\"\n          type=\"button\"\n          onClick={() => history.push(paths.TRANSLATOR)}\n        >\n          <IconEdit color={buttonColors.VARIANT_BLUE} size={24} />\n        </button>\n\n        <div\n          style={{\n            margin: 'auto',\n            position: 'absolute',\n            bottom: 60,\n            left: 0,\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'center',\n            alignItems: 'center',\n            width: '100vw',\n            paddingRight: '28px',\n          }}\n        >\n          <TutorialPopover\n            title=\"Histrico\"\n            description=\"Acesse as tradues dos ltimos 30 dias\"\n            position=\"br\"\n            isEnabled={currentStep === TutorialSteps.HISTORY}\n          />\n        </div>\n        <button\n          className=\"player-action-button-transparent\"\n          type=\"button\"\n          onClick={() => history.push(paths.HISTORY)}\n        >\n          <IconHistory color={buttonColors.VARAINT_WHITE} size={32} />\n        </button>\n      </>\n    );\n  };\n\n  useEffect(() => {\n    const preProcessingPreview = JSON.stringify({\n      corpo: currentBody,\n      olhos: '#fffafa',\n      cabelo: currentHair,\n      camisa: currentShirt,\n      calca: currentPants,\n      iris: currentEye,\n      pos: 'center',\n    });\n    console.log(preProcessingPreview);\n    playerService.send(\n      PlayerKeys.AVATAR,\n      PlayerKeys.SETEDITOR,\n      preProcessingPreview,\n    );\n  }, [currentBody, currentHair, currentShirt, currentPants, currentEye]);\n\n  return (\n    <div className=\"player-container\">\n      <div\n        style={{\n          position: 'absolute',\n          padding: '8px',\n          width: '100%',\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'flex-start',\n          zIndex: 2,\n        }}\n      >\n        <TutorialPopover\n          title=\"Menu\"\n          description=\"Informaes e ajustes adicionais do tradudor\"\n          position=\"tl\"\n          isEnabled={currentStep === TutorialSteps.MENU}\n        />\n      </div>\n      <IonPopover\n        cssClass=\"player-popover\"\n        event={popoverState.event}\n        isOpen={popoverState.showPopover}\n        onDidDismiss={() =>\n          setShowPopover({ showPopover: false, event: undefined })\n        }\n      >\n        <div className=\"player-popover-content\">\n          <button\n            className={\n              speedValue === X3\n                ? 'player-popover-content-item-active'\n                : 'player-popover-content-item-none'\n            }\n            type=\"button\"\n            onClick={() => handleSpeed(X3)}\n          >\n            <span>X3</span>\n          </button>\n          <div className=\"player-popover-content-divider\" />\n          <button\n            className={\n              speedValue === X2\n                ? 'player-popover-content-item-active'\n                : 'player-popover-content-item-none'\n            }\n            type=\"button\"\n            onClick={() => handleSpeed(X2)}\n          >\n            <span>X2</span>\n          </button>\n          <div className=\"player-popover-content-divider\" />\n          <button\n            className={\n              speedValue === X1\n                ? 'player-popover-content-item-active'\n                : 'player-popover-content-item-none'\n            }\n            type=\"button\"\n            onClick={() => handleSpeed(X1)}\n          >\n            <span>X1</span>\n          </button>\n        </div>\n      </IonPopover>\n      <div className=\"player-container-button\">\n        {isPlaying || hasFinished ? (\n          <button\n            className=\"player-button-rounded-top\"\n            type=\"button\"\n            onClick={resetTranslation}\n          >\n            <IconClose color=\"#FFF\" size={24} />\n          </button>\n        ) : (\n          <div style={{ display: 'flex', flexDirection: 'row' }}>\n            <div style={{ marginRight: 6 }}>\n              <TutorialPopover\n                title=\"Trocar avatar\"\n                description=\"Alterne entre os avatares disponveis\"\n                position=\"rb\"\n                isEnabled={currentStep === TutorialSteps.CHANGE_AVATAR}\n              />\n            </div>\n            <button\n              className=\"player-button-avatar-rounded-top\"\n              type=\"button\"\n              onClick={handleChangeAvatar}\n            >\n              {currentAvatar === 'icaro' && <HozanaAvatar />}\n              {currentAvatar === 'hozana' && <GugaAvatar />}\n              {currentAvatar === 'guga' && <IcaroAvatar />}\n            </button>\n          </div>\n        )}\n      </div>\n      <div\n        style={{\n          width: '100vw',\n          zIndex: 0,\n          flexShrink: 0,\n          marginBottom: 70,\n          flex: 1,\n          display: 'flex',\n          background: isPlatform('ios') && visiblePlayer ? 'black' : '#E5E5E5',\n        }}\n      >\n        <Unity\n          unityContent={playerService.getUnity()}\n          className=\"player-content\"\n        />\n      </div>\n\n      {(currentStep === TutorialSteps.LIKED_TRANSLATION ||\n        currentStep === TutorialSteps.SHARE ||\n        (hasFinished && !isPlaying)) && (\n        <div className=\"player-container-buttons\">\n          <div\n            style={{\n              top: -54,\n              position: 'absolute',\n              right: 10,\n            }}\n          >\n            <TutorialPopover\n              title=\"Gostou da traduo?\"\n              description=\"Avalie e sugira melhorias.\"\n              position=\"br\"\n              isEnabled={currentStep === TutorialSteps.LIKED_TRANSLATION}\n            />\n          </div>\n          <button\n            className=\"player-button-rounded\"\n            type=\"button\"\n            onClick={() => setShowModal(true)}\n          >\n            <IconThumbs color=\"#FFF\" size={18} />\n          </button>\n\n          <div\n            style={{\n              top: -2,\n              position: 'absolute',\n              right: 10,\n            }}\n          >\n            <TutorialPopover\n              title=\"Compartilhar\"\n              description=\"Vdeo com a traduo\"\n              position=\"br\"\n              isEnabled={currentStep === TutorialSteps.SHARE}\n            />\n          </div>\n          <button\n            className=\"player-button-rounded\"\n            type=\"button\"\n            onClick={handleShare}\n          >\n            <IconShare color=\"#FFF\" size={18} />\n          </button>\n        </div>\n      )}\n      <div className=\"player-action-container\">\n        <div ref={progressContainerRef} className=\"player-progress-container\">\n          <div ref={progressBarRef} className=\"player-progress-bar\" />\n        </div>\n        <div className=\"play-action-content\">{renderPlayerButtons()}</div>\n      </div>\n\n      <EvaluationModal\n        show={showModal}\n        setShow={setShowModal}\n        showYes={showYesModal}\n        setShowYes={setShowYesModal}\n        showNo={showNoModal}\n        setShowNo={setShowNoModal}\n        showSuggestionModal={showSuggestionModal}\n        setShowSuggestionModal={setShowSuggestionModal}\n        showSuggestionFeedbackModal={showSuggestionFeedbackModal}\n        setSuggestionFeedbackModal={setShowSuggestionFeedbackModal}\n        isPlaying={isPlaying}\n      />\n      {TutorialSteps.INITIAL === currentStep && (\n        <div className=\"tutorial-box-shadow\">\n          <h1>Veja como usar</h1>\n          <div style={{ display: 'flex', flexDirection: 'row', width: '100%' }}>\n            <button className=\"button-outlined\" onClick={onCancel}>\n              Ver depois\n            </button>\n            <button\n              className=\"button-solid\"\n              onClick={goNextStep}\n            >\n              Inicar\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Player;\n"]},"metadata":{},"sourceType":"module"}